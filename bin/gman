#! /usr/bin/env ruby
# Given a domain-link string, returns information about the domain

require_relative "../lib/gman"

# Convenience method to simplify the command-line logic
class IsoCountryCodes
  class Code
    def to_s
      name
    end
  end
end

domain = ARGV[0]

if domain.to_s.empty?
  puts "USAGE: gman <domain or email address>"
  exit 1
end

gman = Gman.new(domain)

puts "Domain  : #{gman.domain}"

if gman.domain.nil?
  puts "Status  : " + "Invalid domain"
  exit 1
end

if !gman.valid?
  puts "Status  : " + "Not a government domain"
  exit 1
end

puts "Status  : " + "Valid government domain"

["type", "country", "state", "city", "agency"].each do |key|
  value = gman.send(key)
  puts "#{key.capitalize.ljust(8)}: #{value}" if value
end

puts "SANCTIONED NATION" if gman.sanctioned?
